---
title: 为Asset Compute可扩展性配置环境变量
description: 环境变量在.env文件中进行维护以用于本地开发，并用于提供本地开发所需的Adobe I/O凭据和云存储凭据。
feature: Asset Compute Microservices
version: Experience Manager as a Cloud Service
doc-type: Tutorial
jira: KT-6270
thumbnail: KT-6270.jpg
topic: Integrations, Development
role: Developer
level: Intermediate, Experienced
exl-id: c63c5c75-1deb-4c16-ba33-e2c338ef6251
duration: 121
source-git-commit: 5edd2a6593936c80803482b382020efa8ce7a215
workflow-type: tm+mt
source-wordcount: '445'
ht-degree: 1%

---

# 配置环境变量

![点环境文件](assets/environment-variables/dot-env-file.png)

在开始开发Asset Compute工作人员之前，请确保该项目配置了Adobe I/O和云存储信息。 此信息存储在项目的`.env`中，仅用于本地开发，而不保存在Git中。 `.env`文件提供了一种简便的方法，用于将键/值对公开到本地Asset Compute本地开发环境。 将[Asset Compute工作进程部署到Adobe I/O Runtime时，未使用](../deploy/runtime.md)文件，而是通过环境变量传入值的子集。 `.env`其他自定义参数和密钥也可以存储在`.env`文件中，例如第三方Web服务的开发凭据。

<!--
## Reference the `private.key`

![private key](assets/environment-variables/private-key.png)

Open the `.env` file, uncomment the `ASSET_COMPUTE_PRIVATE_KEY_FILE_PATH` key, and provide the absolute path on your filesystem to the `private.key` that pairs with the public certificate added to your Adobe I/O App Builder project.

+ If your key pair was generated by Adobe I/O, it was auto-downloaded as part of the  `config.zip`.
+ If you provided the public key to Adobe I/O, then you should also be in possession of the matching private key.
+ If you do not have these key pairs, you can generate new key pairs or upload new public keys at the bottom of:
[https://console.adobe.com](https://console.adobe.io) > Your Asset Compute App Builder project > Workspaces @ Development > Service Account (JWT).

Remember the `private.key` file should not be checked into Git as it contains secrets, rather it should be stored in a safe place outside the project.

For example, on macOS this might look like:

```
...
ASSET_COMPUTE_PRIVATE_KEY_FILE_PATH=/Users/example-user/credentials/aem-guides-wknd-asset-compute/private.key
...
```
-->

## 配置云存储凭据

Asset Compute工作程序的本地开发需要访问[云存储](../set-up/accounts-and-services.md#cloud-storage)。 用于本地开发的云存储凭据在`.env`文件中提供。

本教程倾向于使用Azure Blob Storage，但可以改用Amazon S3及其`.env`文件中的相应密钥。

### 使用Azure Blob存储

在`.env`文件中取消注释并填充以下键，然后使用Azure门户上找到的已设置云存储的值填充这些键。

![Azure Blob存储](./assets/environment-variables/azure-portal-credentials.png)

1. `AZURE_STORAGE_CONTAINER_NAME`键的值
1. `AZURE_STORAGE_ACCOUNT`键的值
1. `AZURE_STORAGE_KEY`键的值

例如，它类似于（值仅供说明）：

```
...
AZURE_STORAGE_ACCOUNT=aemguideswkndassetcomput
AZURE_STORAGE_KEY=Va9CnisgdbdsNJEJBqXDyNbYppbGbZ2V...OUNY/eExll0vwoLsPt/OvbM+B7pkUdpEe7zJhg==
AZURE_STORAGE_CONTAINER_NAME=asset-compute
...
```

结果`.env`文件如下所示：

![Azure Blob Storage凭据](assets/environment-variables/cloud-storage-credentials.png)

如果您未使用Microsoft Azure Blob Storage，请删除或保留这些已注释掉的内容（使用`#`作为前缀）。

### 使用Amazon S3云存储{#amazon-s3}

如果您使用的是Amazon S3云存储，请取消注释并在`.env`文件中填充以下密钥。

例如，它类似于（值仅供说明）：

```
...
S3_BUCKET=aemguideswkndassetcompute
AWS_ACCESS_KEY_ID=KKIXZLZYNLXJLV24PLO6
AWS_SECRET_ACCESS_KEY=Ba898CnisgabdsNJEJBqCYyVrYttbGbZ2...OiNYExll0vwoLsPtOv
AWS_REGION=us-east-1
...
```

## 验证项目配置

在配置生成的Asset Compute项目后，请在更改代码之前验证配置，以确保在`.env`文件中配置支持服务。

要启动适用于Asset Compute项目的Asset Compute开发工具，请执行以下操作：

1. 在Asset Compute项目根目录中打开命令行（在VS Code中，这可以直接在IDE中通过“终端”>“新建终端”打开），然后执行命令：

   ```
   $ aio app run
   ```

1. 本地Asset Compute开发工具将在默认Web浏览器中打开，网址为__http://localhost :9000__。

   ![aio应用运行](assets/environment-variables/aio-app-run.png)

1. 在开发工具初始化时，请观察命令行输出和Web浏览器中的错误消息。
1. 要停止Asset Compute开发工具，请点按执行`Ctrl-C`的窗口中的`aio app run`以终止进程。

## 疑难解答

+ [由于缺少private.key，开发工具无法启动](../troubleshooting.md#missing-private-key)
