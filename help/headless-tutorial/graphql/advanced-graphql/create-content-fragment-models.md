---
title: 创建内容片段模型 — AEM Headless的高级概念 — GraphQL
description: 在Adobe Experience Manager (AEM) Headless的高级概念的这一章中，了解如何通过添加选项卡占位符、日期和时间、JSON对象、片段引用和内容引用来编辑内容片段模型。
version: Cloud Service
feature: Content Fragments, GraphQL API
topic: Headless, Content Management
role: Developer
level: Intermediate
exl-id: 2122ab13-f9df-4f36-9c7e-8980033c3b10
source-git-commit: b3e9251bdb18a008be95c1fa9e5c79252a74fc98
workflow-type: tm+mt
source-wordcount: '1989'
ht-degree: 1%

---

# 创建内容片段模型 {#create-content-fragment-models}

本章介绍创建五个内容片段模型的步骤：

* **联系信息**
* **地址**
* **人员**
* **位置**
* **团队**

内容片段模型允许定义内容类型之间的关系并保留此类关系，例如架构。 使用嵌套片段引用、各种内容数据类型和选项卡类型进行可视内容组织。 更高级的数据类型，如选项卡占位符、片段引用、JSON对象和日期和时间数据类型。

本章还介绍如何增强内容引用（如图像）的验证规则。

## 前提条件 {#prerequisites}

这是一个高级教程。 在继续本章之前，请确保您已完成 [快速设置](../quick-setup/cloud-service.md). 确保您也阅读了前面的内容 [概述](../overview.md) 章节以了解有关高级教程设置的更多信息。

## 目标 {#objectives}

* 创建内容片段模型.
* 为模型添加选项卡占位符、日期和时间、JSON对象、片段引用和内容引用。
* 将验证添加到内容引用。

## 内容片段模型概述 {#content-fragment-model-overview}

以下视频简要介绍了内容片段模型以及在本教程中如何使用它们。

>[!VIDEO](https://video.tv.adobe.com/v/340037?quality=12&learn=on)

## 创建内容片段模型 {#create-models}

让我们为WKND应用程序创建一些内容片段模型。 如果您需要有关创建内容片段模型的基本介绍，请参阅 [基本教程](../multi-step/content-fragment-models.md).

1. 导航到 **工具** > **常规** > **内容片段模型**.

   ![内容片段模型路径](assets/define-content-fragment-models/content-fragment-models-path.png)

1. 选择 **WKND已共享** 查看站点的现有内容片段模型列表。

### 联系信息模型 {#contact-info-model}

接下来，创建一个包含人员或地点联系人信息的模型。

1. 选择 **创建** 在右上角。

1. 为模型指定“联系信息”标题，然后选择 **创建**. 在显示的成功模式中，选择 **打开** 以编辑新创建的模型。

1. 从拖动开始 **单行文本** 字段到模型上。 将其赋予 **字段标签** 中的“Phone” **属性** 选项卡。 属性名称会自动填写为 `phone`. 选中此复选框可生成字段 **必需**.

1. 导航到 **数据类型** 选项卡，然后添加另一个 **单行文本** “电话”字段下的字段。 将其赋予 **字段标签** “Email”的任意值，并将其设置为 **必需**.

Adobe Experience Manager附带了一些内置的验证方法。 这些验证方法允许您向内容片段模型中的特定字段添加治理规则。 在这种情况下，让我们添加一个验证规则，以确保用户在填写此字段时只能输入有效的电子邮件地址。 在 **验证类型** 下拉列表，选择 **电子邮件**.

您完成的内容片段模型应如下所示：

![联系人信息模型路径](assets/define-content-fragment-models/contact-info-model.png)

完成后，选择 **保存** 以确认更改并关闭内容片段模型编辑器。

### 地址模型 {#address-model}

接下来，为地址创建模型。

1. 从 **WKND已共享**，选择 **创建** 从右上角。

1. 输入“地址”标题，然后选择 **创建**. 在显示的成功模式中，选择 **打开** 以编辑新创建的模型。

1. 拖放 **单行文本** 将字段置于模型上并赋予 **字段标签** “街道地址”的URL。 然后，属性名称将填写为 `streetAddress`. 选择 **必需** 复选框。

1. 重复上述步骤并向模型添加四个“单行文本”字段。 使用以下标签：

   * 城市
   * 状态
   * 邮政编码
   * 国家/地区

1. 选择 **保存** 以保存对地址模型的更改。

   已完成的“地址”片段模型应如下所示：
   ![地址模型](assets/define-content-fragment-models/address-model.png)

### 人员模型 {#person-model}

接下来，创建一个包含人员信息的模型。

1. 在右上角，选择 **创建**.

1. 将模型标题命名为“人员”，然后选择 **创建**. 在显示的成功模式中，选择 **打开** 以编辑新创建的模型。

1. 从拖动开始 **单行文本** 字段到模型上。 将其赋予 **字段标签** “全名”。 属性名称会自动填写为 `fullName`. 选中此复选框可生成字段 **必需**.

   ![全名选项](assets/define-content-fragment-models/full-name.png)

1. 内容片段模型可以在其他模型中引用。 导航到 **数据类型** 选项卡，然后拖放 **片段引用** 字段并为其指定“联系人信息”标签。

1. 在 **属性** 选项卡，在 **允许的内容片段模型** 字段中，选择文件夹图标，然后选择 **联系信息** 之前创建的片段模型。

1. 添加 **内容引用** 字段并赋予 **字段标签** “个人资料图片”中的。 选择下面的文件夹图标 **根路径** 以打开路径选择模式。 通过选择 **内容** > **资产**，然后选中复选框 **WKND已共享**. 使用 **选择** 按钮以保存路径。 最终文本路径应为 `/content/dam/wknd-shared`.

   ![内容引用根路径](assets/define-content-fragment-models/content-reference-root-path.png)

1. 下 **仅接受指定的内容类型**，选择“图像”。

   ![配置文件图片选项](assets/define-content-fragment-models/profile-picture.png)

1. 要限制图像文件大小和尺寸，请查看内容引用字段的一些验证选项。

   下 **仅接受指定的文件大小**，选择“小于或等于”，其他字段显示在下方。
   ![仅接受指定的文件大小](assets/define-content-fragment-models/accept-specified-file-size.png)

1. 对象 **最大值**，输入“5”，然后为 **选择单位**，选择“兆字节(MB)”。 此验证仅允许选择指定大小的图像。

1. 下 **仅接受指定的图像宽度**，选择“最大宽度”。 在 **最大值（像素）** 字段，输入“10000”。 选择相同的选项 **仅接受指定的图像高度**.

   这些验证可确保添加的图像不超过指定的值。 验证规则现在应如下所示：

   ![内容引用验证规则](assets/define-content-fragment-models/content-reference-validation.png)

1. 添加 **多行文本** 字段并赋予 **字段标签** 《传记》的剧本。 保留 **默认类型** 下拉菜单作为默认的“富文本”选项。

   ![传记选项](assets/define-content-fragment-models/biography.png)

1. 导航到 **数据类型** 选项卡，然后拖动 **明细列表** “传记”下面的字段。 而不是默认内容 **呈现为** 选项，选择 **下拉列表** 然后给它一个 **字段标签** “讲师经验级别”的课程。 输入一系列讲师体验级别选项，例如 _专家、高级、中级_.

1. 接下来，拖动另一个 **明细列表** “讲师体验级别”下的字段，然后选择 **呈现为** 选项。 将其赋予 **字段标签** “技能”的URL。 参加攀岩、冲浪、骑自行车、滑雪和背包等不同技能。 选项标签和选项值应匹配如下：

   ![技能明细列表](assets/define-content-fragment-models/skills-enum.png)

1. 最后，使用创建“管理员详细信息”字段标签 **多行文本** 字段。

选择 **保存** 以确认更改并关闭内容片段模型编辑器。

### 位置模型 {#location-model}

下一个内容片段模型描述了物理位置。 此模型使用制表符占位符。 选项卡占位符通过对内容进行分类，有助于分别在模型编辑器和片段编辑器中整理数据类型。 每个占位符在内容片段编辑器中创建一个选项卡，类似于Internet浏览器中的选项卡。 位置模型应有两个选项卡：“位置详细信息”和“位置地址”。

1. 与以前一样，选择 **创建** 以创建另一个内容片段模型。 在模型标题中，输入“位置”。 选择 **创建** 后接 **打开** 在显示的成功模式窗口中。

1. 添加 **制表符占位符** 字段到模型并将其标记为“位置详细信息”。

1. 拖放 **单行文本** 并标示为“名称” 在此字段标签下方，添加 **多行文本** 字段并将其标记为“描述”。

1. 接下来，添加 **片段引用** 字段并将其标记为“联系人信息”。 在“属性”选项卡中的 **允许的内容片段模型**，选择 **文件夹图标** 并选择之前创建的“联系信息”片段模型。

1. 添加 **内容引用** “联系人信息”下的字段。 将其标记为“位置图像”。 此 **根路径** 应为 `/content/dam/wknd-shared.` 下 **仅接受指定的内容类型**，选择“图像”。

1. 让我们也添加 **JSON对象** “位置图像”下的字段。 由于此数据类型很灵活，因此可用于显示要包含在内容中的任何数据。 在这种情况下，JSON对象用于显示有关天气的信息。 将JSON对象标记为“按季节显示天气”。 在 **属性** 选项卡，添加 **描述** 因此用户可清楚地看到应在此处输入哪些数据：“有关按季节（春季、夏季、秋季和冬季）的事件位置天气的JSON数据。”

   ![JSON对象选项](assets/define-content-fragment-models/json-object.png)

1. 要创建“位置地址”选项卡，请添加 **制表符占位符** 字段到模型并将其标记为“位置地址”。

1. 拖放 **片段引用** 字段，在属性选项卡中，将其标记为“Address”，然后在 **允许的内容片段模型**，选择 **地址** 型号。

1. 选择 **保存** 以确认更改并关闭内容片段模型编辑器。 已完成的“位置”模型应如下所示：

   ![内容引用选项](assets/define-content-fragment-models/location-model.png)

### 团队模型 {#team-model}

最后，创建一个描述人员团队的模型。

1. 从 **WKND已共享** 页面，选择 **创建** 以制作另一个内容片段模型。 在“模型标题”中，输入“团队”。 与以前一样，选择 **创建** 后接 **打开** 在显示的成功模式窗口中。

1. 添加 **多行文本** 字段到表单。 下 **字段标签**，输入“描述”。

1. 添加 **日期和时间** 字段到模型并将其标记为“团队创建日期”。 在这种情况下，保留默认值 **类型** 设置为“Date”，但请注意，也可以使用“Date &amp; Time”或“Time”。

   ![日期和时间选项](assets/define-content-fragment-models/date-and-time.png)

1. 导航到 **数据类型** 选项卡。 在“团队创建日期”下方，添加 **片段引用**. 在 **呈现为** 在下拉列表中，选择“多字段”。 对象 **字段标签**，输入“团队成员”。 此字段链接到 _人员_ 之前创建的模型。 由于数据类型是多字段的，因此可以添加多个人员片段，从而能够创建一组人员。

   ![片段引用选项](assets/define-content-fragment-models/fragment-reference.png)

1. 下 **允许的内容片段模型**，使用文件夹图标打开选择路径模式窗口，然后选择 **人员** 型号。 使用 **选择** 按钮以保存路径。

   ![选择人员模型](assets/define-content-fragment-models/select-person-model.png)

1. 选择 **保存** 以确认更改并关闭内容片段模型编辑器。

## 向冒险模型添加片段引用 {#fragment-references}

与团队模型具有对人员模型的片段引用类似，必须从冒险模型引用团队和位置模型，才能在WKND应用程序中显示这些新模型。

1. 从 **WKND已共享** 页面上，选择 **冒险** 模型，然后选择 **编辑** 从顶部导航中。

   ![冒险编辑路径](assets/define-content-fragment-models/adventure-edit-path.png)

1. 在表单底部的“What to Bring”下方，添加 **片段引用** 字段。 输入 **字段标签** “位置”的URL。 下 **允许的内容片段模型**，选择 **位置** 型号。

   ![位置片段引用选项](assets/define-content-fragment-models/location-fragment-reference.png)

1. 再添加一个 **片段引用** 字段并将其标记为“讲师团队”。 下 **允许的内容片段模型**，选择 **团队** 型号。

   ![团队片段引用选项](assets/define-content-fragment-models/team-fragment-reference.png)

1. 添加另一个 **片段引用** 字段并将其标记为“管理员”。

   ![管理员片段引用选项](assets/define-content-fragment-models/administrator-fragment-reference.png)

1. 选择 **保存** 以确认更改并关闭内容片段模型编辑器。

## 最佳实践 {#best-practices}

以下是一些与创建内容片段模型相关的最佳实践：

* 创建映射到UX组件的模型。 例如，WKND应用程序具有用于冒险、文章和位置的内容片段模型。 您还可以添加标题、促销或免责声明。 这些示例中的每一个都构成一个特定的UX组件。

* 尽可能少地创建模型。 通过限制模型数量，您可以最大限度地重用和简化内容管理。

* 根据需要深度嵌套内容片段模型，但仅在必要时进行嵌套。 回想一下，嵌套是通过片段引用或内容引用完成的。 最多考虑五层嵌套。

## 恭喜！ {#congratulations}

恭喜！现在，您已添加选项卡，使用日期和时间以及JSON对象数据类型，并了解有关片段和内容引用的更多信息。 您还添加了内容引用验证规则。

## 后续步骤 {#next-steps}

本系列的下一章将涵盖 [创作内容片段](/help/headless-tutorial/graphql/advanced-graphql/author-content-fragments.md) 从您在本章中创建的模型中选择。 了解如何使用本章介绍的数据类型并创建文件夹策略以限制可以在资源文件夹中创建哪些内容片段模型。

虽然对于本教程而言，它是可选的，但请确保在真实的生产环境中发布所有内容。 有关AEM中“创作”和“发布”环境的审查，请参阅
[AEM Headless和GraphQL视频系列](/help/headless-tutorial/graphql/video-series/author-publish-architecture.md).
