---
title: 创建内容片段模型 — AEM无头的高级概念 — GraphQL
description: 在Adobe Experience Manager(AEM)无标题的高级概念的本章中，了解如何通过添加选项卡占位符、日期和时间、JSON对象、片段引用和内容引用来编辑内容片段模型。
version: Cloud Service
feature: Content Fragments, GraphQL API
topic: Headless, Content Management
role: Developer
level: Intermediate
source-git-commit: 83e16ea87847182139982ea2378d8ff9f079c968
workflow-type: tm+mt
source-wordcount: '1968'
ht-degree: 0%

---


# 创建内容片段模型 {#create-content-fragment-models}

本章将介绍创建五个内容片段模型的步骤：

* **联系信息**
* **地址**
* **人员**
* **位置**
* **团队**

内容片段模型允许定义内容类型之间的关系并保留此类关系（如架构）。 使用嵌套的片段引用、各种内容数据类型和选项卡类型来组织可视内容。 更高级的数据类型，如选项卡占位符、片段引用、JSON对象以及日期和时间数据类型。

本章还介绍如何增强内容引用（如图像）的验证规则。

## 前提条件 {#prerequisites}

这是一个高级教程。 在继续处理本章之前，请确保您已完成 [快速设置](../quick-setup/cloud-service.md). 请确保您还阅读了前面的概述章节，以了解有关高级教程设置的更多信息。

## 目标 {#objectives}

* 创建内容片段模型。
* 添加选项卡占位符、日期和时间、JSON对象、片段引用以及对模型的内容引用。
* 向内容引用添加验证。

## 内容片段模型概述 {#content-fragment-model-overview}

以下视频简要介绍内容片段模型以及在本教程中如何使用它们。

>[!VIDEO](https://video.tv.adobe.com/v/340037/?quality=12&learn=on)

## 创建内容片段模型 {#create-models}

让我们为WKND应用程序创建一些内容片段模型。 如果您需要对创建内容片段模型进行基本介绍，请参阅 [基本教程](../multi-step/content-fragment-models.md).

1. 导航到 **工具** > **资产** > **内容片段模型**.

   ![内容片段模型路径](assets/define-content-fragment-models/content-fragment-models-path.png)

2. 选择 **WKND站点** 查看网站的现有内容片段模型列表。

### 联系信息模型 {#contact-info-model}

接下来，创建一个包含人员或位置联系信息的模型。

1. 选择 **创建** 中。

2. 为模型指定标题“联系信息”，然后选择 **创建**. 在显示的成功模式中，选择 **打开** 以编辑新创建的模型。

3. 首先，拖动 **单行文本** 字段。 给它一个 **字段标签** 中的“Phone” **属性** 选项卡。 属性名称会自动填写为 `phone`. 选中此复选框可创建字段 **必需**.

4. 导航到 **数据类型** 选项卡，然后添加另一个 **单行文本** 字段。 给它一个 **字段标签** “电子邮件”，并将其设置为 **必需**.

Adobe Experience Manager附带了一些内置的验证方法。 这些验证方法允许您将管理规则添加到内容片段模型中的特定字段。 在这种情况下，让我们添加验证规则，以确保用户在填写此字段时只能输入有效的电子邮件地址。 在 **验证类型** 下拉列表，选择 **电子邮件**.

您完成的内容片段模型应当如下所示：

![联系信息模型路径](assets/define-content-fragment-models/contact-info-model.png)

完成后，选择 **保存** 确认更改并关闭内容片段模型编辑器。

### 地址模型 {#address-model}

接下来，为地址创建一个模型。

1. 从 **WKND站点**，选择 **创建** 中。

2. 输入“Address”的标题，然后选择 **创建**.

   i.在显示的成功模式中，选择 **打开** 以编辑新创建的模型。

3. 拖放 **单行文本** 字段，并为其提供 **字段标签** &quot;街道地址&quot; 然后，属性名称将作为 `streetAddress`. 选择 **必需** 复选框。

4. 重复上述步骤，并向模型中添加四个“单行文本”字段。 使用以下标签：

   * 城市
   * 状态
   * 邮政编码
   * 国家/地区

5. 选择 **保存** 以保存对地址模型所做的更改。

   已完成的“地址”片段模型应当如下所示：
   ![地址模型](assets/define-content-fragment-models/address-model.png)

### 人员模型 {#person-model}

接下来，创建一个包含人员相关信息的模型。

1. 在右上角，选择 **创建**.

2. 为模型指定标题“Person”，然后选择 **创建**. 在显示的成功模式中，选择 **打开** 以编辑新创建的模型。

3. 首先，拖动 **单行文本** 字段。 给它一个 **字段标签** 全名。 属性名称会自动填写为 `fullName`. 选中此复选框可创建字段 **必需**.

   ![全名选项](assets/define-content-fragment-models/full-name.png)

4. 内容片段模型可在其他模型中引用。 导航到 **数据类型** ，然后拖放 **片段引用** 字段，并为其提供“联系信息”标签。

5. 在 **属性** 选项卡 **允许的内容片段模型** 字段，选择文件夹图标，然后选择 **联系信息** 之前创建的片段模型。

6. 添加 **内容参考** 字段 **字段标签** “个人资料图片” 选择下方的文件夹图标 **根路径** 打开路径选择模式。 通过选择 **内容** > **资产**，然后选中复选框 **WKND站点**. 使用 **选择** 按钮来保存路径。 最终文本路径应为 `/content/dam/wknd`.

   ![内容引用根路径](assets/define-content-fragment-models/content-reference-root-path.png)

7. 在 **仅接受指定的内容类型**，选择“图像”。

   ![配置文件图片选项](assets/define-content-fragment-models/profile-picture.png)

8. 要限制图像文件大小和尺寸，让我们查看内容引用字段的一些验证选项。

   在 **仅接受指定的文件大小**，选择“小于或等于”，下面将显示其他字段。
   ![仅接受指定的文件大小](assets/define-content-fragment-models/accept-specified-file-size.png)

9. 对于 **Max**，输入“5”，对于 **选择设备**，选择“MB(MB)”。 此验证仅允许选择具有指定大小的图像。

10. 在 **仅接受指定的图像宽度**，选择“最大宽度”。 在 **最大（像素）** 字段，输入“500”。 为 **仅接受指定的图像高度**.

    这些验证可确保添加的图像不会超过指定的值。 验证规则现在应如下所示：
    ![内容引用验证规则](assets/define-content-fragment-models/content-reference-validation.png)

11. 添加 **多行文本** 字段 **字段标签** 《传记》 离开 **默认类型** 下拉列表作为默认的“富文本”选项。

    ![传记选项](assets/define-content-fragment-models/biography.png)

12. 导航到 **数据类型** ，然后拖动 **明细列表** 字段。 而不是默认 **渲染为** 选项，选择 **下拉列表**. 输入教师体验级别选项的选项，如专家、高级、中级。

13. 接下来，拖动另一个 **明细列表** “讲师体验级别”下的字段，然后选中 **渲染为** 选项。 进入不同的技能，如攀岩、冲浪、骑自行车、滑雪和背包。 选项标签和选项值应匹配如下：

    ![技能明细表](assets/define-content-fragment-models/skills-enum.png)

14. 最后，使用 **多行文本** 字段。

选择 **保存** 确认更改并关闭内容片段模型编辑器。

### 位置模型 {#location-model}

下一个内容片段模型描述物理位置。 此模型使用制表符占位符。 通过对内容进行分类，选项卡占位符有助于分别在模型编辑器和片段编辑器中的内容中组织数据类型。 每个占位符都会在内容片段编辑器中创建一个选项卡，与Internet浏览器中的选项卡类似。 “位置”(Location)模型应具有两个选项卡：位置详细信息和位置地址。

1. 如前所述，选择 **创建** 创建其他内容片段模型。 在“模型标题”中，输入“位置”。 选择 **创建** 后跟 **打开** （在显示的成功模式下）。

2. 添加 **制表符占位符** 字段并将其标记为“位置详细信息”。

3. 拖放 **单行文本** 并将其标记为“Name”。 在此字段标签下，添加 **多行文本** 字段并将其标记为“描述”。

4. 接下来，添加 **片段引用** 字段并将其标记为“联系信息”。 在属性选项卡的下 **允许的内容片段模型**，选择 **文件夹图标** 并选择之前创建的“联系信息”片段模型。

5. 添加 **内容参考** 字段。 将其标记为“位置图像”。 的 **根路径** 应该 `/content/dam/wknd.` 在 **仅接受指定的内容类型**，选择“图像”。

6. 我们还可以添加 **JSON对象** 字段。 由于此数据类型是灵活的，因此可用于显示要包含在内容中的任何数据。 在这种情况下，使用JSON对象来显示有关天气的信息。 将JSON对象标记为“按季度排列的天气”。 在 **属性** 选项卡，添加 **描述** 因此，用户可以清楚地知道应在此处输入哪些数据：“有关活动位置按季（春季、夏季、秋季、冬季）的天气的JSON数据。”

   ![JSON对象选项](assets/define-content-fragment-models/json-object.png)

7. 要创建位置地址选项卡，请添加 **制表符占位符** 字段并将其标记为“位置地址”。

8. 拖放 **片段引用** 字段和属性选项卡中的 **允许的内容片段模型**，选择 **地址** 模型。

9. 选择 **保存** 确认更改并关闭内容片段模型编辑器。 已完成的位置模型应如下所示：

   ![内容引用选项](assets/define-content-fragment-models/location-model.png)

### 团队模型 {#team-model}

最后，创建一个描述一组人员的模型。

1. 从 **WKND站点** 页面，选择 **创建** 以创建另一个内容片段模型。 在模型标题中，输入“团队”。 如前所述，选择 **创建** 后跟 **打开** （在显示的成功模式下）。

2. 添加 **多行文本** 字段。 在 **字段标签**，输入“描述”。

3. 添加 **日期和时间** 字段并将其标记为“团队创建日期”。 在这种情况下，请保留默认 **类型** 设置为“Date”，但请注意，也可以使用“Date &amp; Time”或“Time”。

   ![日期和时间选项](assets/define-content-fragment-models/date-and-time.png)

4. 导航到 **数据类型** 选项卡。 在“团队创建日期”下，添加 **片段引用**. 在 **渲染为** 下拉列表中，选择“多字段”。 对于 **字段标签**，输入“团队成员”。 此字段链接到之前创建的人员模型。 由于数据类型是多字段，因此可以添加多个人员片段，从而创建人员团队。

   ![片段引用选项](assets/define-content-fragment-models/fragment-reference.png)

5. 在 **允许的内容片段模型**，使用文件夹图标打开选择路径模式，然后选择 **人员** 模型。 使用 **选择** 按钮来保存路径。

   ![选择人员模型](assets/define-content-fragment-models/select-person-model.png)

6. 选择 **保存** 确认更改并关闭内容片段模型编辑器。

## 将片段引用添加到冒险模型 {#fragment-references}

与团队模型对人员模型的片段引用类似，必须从冒险模型中引用团队和位置模型才能在WKND应用程序中显示这些新模型。

1. 从 **WKND站点** 页面，选择 **冒险** 模型，然后选择 **编辑** 中。

   ![冒险编辑路径](assets/define-content-fragment-models/adventure-edit-path.png)

2. 在表单底部的“What to Bring”下，添加 **片段引用** 字段。 输入 **字段标签** “位置”。 在 **允许的内容片段模型**，选择 **位置** 模型。

   ![位置片段引用选项](assets/define-content-fragment-models/location-fragment-reference.png)

3. 再添加一个 **片段引用** 字段，并将其标记为“教师团队”。 在 **允许的内容片段模型**，选择 **团队** 模型。

   ![团队片段引用选项](assets/define-content-fragment-models/team-fragment-reference.png)

4. 添加其他 **片段引用** 字段并将其标记为“管理员”。

   ![管理员片段引用选项](assets/define-content-fragment-models/administrator-fragment-reference.png)

5. 选择 **保存** 确认更改并关闭内容片段模型编辑器。

## 最佳实践 {#best-practices}

有一些与创建内容片段模型相关的最佳实践：

* 创建映射到UX组件的模型。 例如，WKND应用程序具有用于冒险、文章和位置的内容片段模型。 您还可以添加标题、促销活动或免责声明。 每个示例都构成了特定的UX组件。

* 尽可能少地创建模型。 通过限制模型数量，可以最大限度地重复使用和简化内容管理。

* 根据需要深度嵌套内容片段模型，但仅在必要时。 请记住，嵌套是通过片段引用或内容引用完成的。 考虑最多五个嵌套级别。

## 恭喜！ {#congratulations}

恭喜！ 您现在已添加选项卡，使用日期和时间和JSON对象数据类型，并了解有关片段和内容引用的更多信息。 您还添加了内容引用验证规则。

## 后续步骤 {#next-steps}

本系列的下一章将介绍 [创作内容片段](/help/headless-tutorial/graphql/advanced-graphql/author-content-fragments.md) 从本章中创建的模型。 了解如何使用本章中介绍的数据类型并创建文件夹策略，以限制可以在资产文件夹中创建的内容片段模型。

虽然在本教程中它是可选的，但请确保在实际生产环境中发布所有内容。 有关AEM中的创作和发布环境的查看，请参阅
[AEM无头和GraphQL视频系列](/help/headless-tutorial/graphql/video-series/author-publish-architecture.md).
